### <a name="_b7urdng99y53"></a>**Название задачи:** MVP по открытию депозита с помощью сайта и интернет-банка
### <a name="_hjk0fkfyohdk"></a>**Автор:** -
### <a name="_uanumrh8zrui"></a>**Дата:** 16.07.2025
### <a name="_3bfxc9a45514"></a>**Функциональные требования**

| **№** | **Действующие лица или системы**                                                          | **Use Case**                                        | **Описание**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|:-----:|:------------------------------------------------------------------------------------------|:----------------------------------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|  UC1  | Пользователь, сайт, система по работе с депозитами                                        | Просмотр страницы сайта с депозитами                | 1. Пользователь заходит на сайт в раздел депозитов  <br/>2. Пользователь видит список доступных депозитов с актуальными ставками, полученными при обращении к сайта к системе по работе с депозитами                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|  UC2  | Пользователь, сотрудник кол-центра, сотрудник фронт-офиса, сотрудник бэк-офиса, сайт, АБС | Подача заявки на открытие депозита на сайте         | 1. Пользователь заходит на сайт в раздел депозитов  <br/>2. Пользователь указывает ФИО и номер и подает заявку на открытие депозита  <br/>3. Сотрудник кол-центра изучает заявку пользователя и перезванивает пользователю.  <br/>4. Если клиент новый, он приходит в отделение банка для открытия депозита  <br/>5. Сотрудник фронт-офиса устанавливает личность и подтверждает заявку на открытие депозита в АБС.  <br/>6. Сотрудник бэк-офиса проверяет ставку и подтверждает открытие депозита в АБС                                                                                                                                      |
|  UC3  | Пользователь, интернет-банк, система по работе с депозитами                               | Просмотр предложений по депозитам в интернет-банке  | 1. Пользователь заходит в интернет-банк в раздел депозитов  <br/>2. Пользователь видит список доступных депозитов с актуальными ставками и персонализированные ставки, полученные при взаимодействие интернет-банка и системы по работе с депозитами                                                                                                                                                                                                                                                                                                                                                                                          |
|  UC4  | Пользователь, сотрудник бэк-офиса, интернет-банк, АБС, система по работе с депозитами     | Подача заявки на открытие депозита в интернет-банке | 1. Пользователь заходит в интернет-банк в раздел депозитов  <br/>2. Пользователь указывает счет и сумму депозита и направляет заявку на открытие депозита  <br/>3. Интернет-бана направляет заявку на открытие депозита в систему по работе с депозитами.  <br/>4. Система по работе с депозитами направляет заявку в АБС.  <br/>5. Пользователю приходит СМС-код для подтверждения заявки на открытие депозита  <br/>6. Пользователь вводит СМС-код и подтверждает открытие депозита.  <br/>7. Сотрудник бэк-офиса получает в работу заявку и подтверждают ее через АБС.  <br/>8. Пользователь получает СМС-уведомление об открытии депозита |
|  UC5  | Сотрудник отделения, сотрудник IT-отдела, система по работе с депозитами                  | Регистрация                                         | 1. При трудоустройстве сотрудника в IT-отдел приходит заявка на регистрацию пользователя в системе по работе с депозитами.  <br/>2. Сотрудник IT-отдела создает учетную запись пользователю.  <br/>3. Сотрудник отделения получает данные для входа в систему                                                                                                                                                                                                                                                                                                                                                                                 |
|  UC6  | Сотрудник отделения, система по работе с депозитами                                       | Авторизация                                         | 1. Сотрудник переходит на сайт системы по работе с депозитами  <br/>2. Сотрудник вводит свои учетные данные  <br/>3. При успехе отображается раздел по расчету ставок депозитов                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|  UC7  | Сотрудник отделения, система по работе с депозитами                                       | Работа со ставками по депозиту                      | 1. При получении письма с Excel-файлом с показателями для расчета депозитов автоматически происходит загрузка данных в систему по работе с депозитами.  <br/>2. Авторизованный сотрудник отделения делает необходимые расчеты для вычисления ставки по депозиту в системе по работе с депозитами                                                                                                                                                                                                                                                                                                                                              |
|  UC8  | Почтовый сервер, система по работе с депозитами                                           | Загрузка ставок                                     | 1. При поступлении письма в почтовый сервер вызывается вебхук системы по работе с депозитами.  <br/>2. Система по работе с депозитами при вызове получает и распаршивает полученный Excel-файл со ставками  <br/>3. Полученные ставки сохраняются и обновляется страница со ставками по депозитам                                                                                                                                                                                                                                                                                                                                             |


### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**

|**№**|**Требование**|
| :-: | :- |
| R   | Надёжность (Reliability)                                                                                                                                                                             |                                      |
| R1  | Сервисы должны работать 24/7 и быть доступны в 99,9% случаев                                                                                                                                         |                                      |
| R2  | При сбоях в ЦОД необходимо, чтобы сервисы интернет-банка были доступны и выдерживали нагрузку                                                                                                        |                                      |
| P   | Производительность (Performance)                                                                                                                                                                     |                                      |
| P1  | Отклик по всем операциям должен быть максимально быстрым и занимать миллисекунды                                                                                                                     |                                      |
| P2  | Равномерное горизонтальное масштабирование и распределение запросов между серверами, приложениями и ЦОД                                                                                              |                                      |
| S   | Поддерживаемость (Supportability)                                                                                                                                                                    |                                      |
| S1  | Должна быть поддержка интеграционного тестирования                                                                                                                                                   |                                      |
| +R  | + Ограничения (Restrictions)                                                                                                                                                                         |                                      |
| +R1 | Клиентские данные, передаваемые для сайта и для интернет-банка, должны шифроваться во время передачи                                                                                                 |                                      |
| +R2 | Персональные данные пользователей, обрабатываемые банком, должны быть защищены в соответствии с законодательством РФ                                                                                 |                                      |
| +R3 | При доработках во всех системах рекомендуется использовать технологии, которые уже есть в банке, либо использовать новые технологии, которые будут совместимы с существующими платформами разработки |                                      |
| +R4 | При проведении платежей некоторые справочные данные загружаются больше секунды                                                                                                                       | Данную проблему необходимо исправить |
| +R5 | АБС может масштабироваться только вертикально из-за своей БД                                                                                                                                         |                                      |

### <a name="_qmphm5d6rvi3"></a>**Решение**
Схемы контекста и контейнеров приведены в файлах [C4_container.puml](C4_container.puml) и [C4_context.puml](C4_context.puml).
Для работы с депозитами планируется создать отдельный сервис, в котором могут быть расчитаны ставки и сформированы заявки на открытие депозита.
Технологии, предлагаемые для реализации системы по работе с депозитами, уже используются в рамках общей системы.
Для обеспечения максимально быстрых ответов пользователю, с учетом нагрузки на АБС, было принято решение обращаться к АБС через систему по работе с депозитами.
Для уменьшения нагрузки на АБС в результате обращений со стороны системы по работе с депозитами, было принято решение реализовать взаимодействие между сервисами с использованием брокера сообщений Kafka.
Таким образом, клиент сразу получит ответ о том, что его заявка на депозит находится в обработке.

### <a name="_bjrr7veeh80c"></a>**Альтернативы**
Добавить обработку депозитов в АБС и ходить напрямую в АБС при работе с заявками на депозиты.
Но это может привести к увеличению нагрузки на АБС и простоям системы.

**Недостатки, ограничения, риски**

1. Разработка нового сервиса планируется на Java, опыт с которой есть у нескольких специалистов из команды АБС.
2. Интернет-банк является монолитной системой, что в будущем может усложнить разработку
3. Внедрение брокера сообщений может потребовать дополнительное обучение сотрудников

